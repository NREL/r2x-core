<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Data Management: Design Philosophy" href="data-management.html"><link rel="prev" title="HDF5 Reader System" href="h5-readers.html">

    <!-- Generated with Sphinx 7.4.7 and Furo 2025.12.19 -->
        <title>Rule System Architecture - r2x-core</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-reports.e44b1595f1e09d5e109d001839ba3f42.css?v=0b41afa8" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=48ff25d5" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     
        <strong>üéâ R2X Core v1.0.0 is now available!</strong>
        This is our first Long-Term Support (LTS) release.
        <a href="https://github.com/NREL/r2x-core/releases/tag/v0.1.0" target="_blank">View release notes</a>
     
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">r2x-core</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">r2x-core</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/getting-started.html">Getting Started with R2X Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/working-with-units.html">Create Power System Components with Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/plugin-system.html">Plugin System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/plugin-context.html">Plugin Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/plugin-discovery.html">Plugin Discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/plugin-utilities.html">Plugin Developer Utilities</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-tos/index.html">How-To Guides</a><input aria-label="Toggle navigation of How-To Guides" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configure-data-settings.html">Configuring Data Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configure-data-files.html">Working with DataFiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/read-data-files.html">Read Data Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/read-hdf5-files.html">Reading HDF5 Data Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/manage-datastores.html">Managing Datastores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/process-file-data.html">Processing File Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/convert-units.html">Work with Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/manage-systems.html">Managing Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/attach-timeseries.html">Attaching Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/build-parsers.html">Parser Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/build-exporters.html">Exporter Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/create-function-plugins.html">Create Function-Based Transform Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/structure-plugin-directories.html">Plugin Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/register-plugins.html">Create and Register Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/run-plugins.html">Using Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/define-rule-mappings.html">Working with Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/create-rules.html">Create Translation Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/apply-rules.html">Apply Translation Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/create-rule-filters.html">Rule Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/manage-versions.html">Managing Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data-files.html">Upgrade Data Between Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html">Upgrade Systems Between Versions</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Explanations</a><input aria-label="Toggle navigation of Explanations" checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plugin-system.html">Plugin System Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit-system.html">Unit System Design and Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="h5-readers.html">HDF5 Reader System</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Rule System Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-management.html">Data Management: Design Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="versioning.html">Versioning and Upgrades: Design Philosophy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../references/index.html">Reference</a><input aria-label="Toggle navigation of Reference" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../references/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/units.html">Units Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/parser.html">Parser Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/exporter.html">Exporter Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/plugins.html">Plugin System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/versioning.html">Versioning Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/upgrader.html">Upgrade System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/processors.html">Data Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/exceptions.html">Exceptions Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/file-formats.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/file-types.html">File Types API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/models.html">Data Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/results.html">Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/NREL/r2x-core/blob/main/docs/source/explanations/rules-system.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/NREL/r2x-core/edit/main/docs/source/explanations/rules-system.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="rule-system-architecture">
<h1>Rule System Architecture<a class="headerlink" href="#rule-system-architecture" title="Link to this heading">¬∂</a></h1>
<p>This document explains the design philosophy and implementation of the
rule-based translation system in R2X Core. For practical usage, see the
<a class="reference internal" href="../how-tos/define-rule-mappings.html"><span class="doc">Working with Rules</span></a> guide.</p>
<section id="purpose-and-motivation">
<h2>Purpose and Motivation<a class="headerlink" href="#purpose-and-motivation" title="Link to this heading">¬∂</a></h2>
<p>Power system model translation involves converting components from one modeling
format to another. A generator in ReEDS has different field names, units, and
structures than a generator in PLEXOS or Sienna. The <a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a>
class provides a declarative way to express these transformations without
writing procedural code for each source-target pair.</p>
<p>Traditional approaches to model translation often involve hard-coded conversion
functions. Each source format requires a dedicated function that manually maps
fields, handles edge cases, and creates target components. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traditional imperative approach - code bloat and hard to maintain</span>
<span class="k">def</span><span class="w"> </span><span class="nf">translate_model_a_to_model_b</span><span class="p">(</span><span class="n">component_a</span><span class="p">,</span> <span class="n">target_system</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">component_a</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;TypeA&quot;</span> <span class="ow">and</span> <span class="n">component_a</span><span class="o">.</span><span class="n">capacity</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">component_b</span> <span class="o">=</span> <span class="n">ComponentB</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">capacity</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">capacity</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;TypeA&quot;</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">target_system</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">component_b</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">component_a</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;TypeB&quot;</span><span class="p">,</span> <span class="s2">&quot;TypeC&quot;</span><span class="p">]:</span>
        <span class="n">component_b</span> <span class="o">=</span> <span class="n">ComponentB</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">capacity</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">capacity</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">rating</span><span class="o">=</span><span class="n">component_a</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rating&quot;</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">target_system</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">component_b</span><span class="p">)</span>
    <span class="c1"># ... many more conditions, growing quickly</span>

<span class="c1"># Adding support for model_c requires new functions for same transformations</span>
<span class="k">def</span><span class="w"> </span><span class="nf">translate_model_c_to_model_b</span><span class="p">(</span><span class="n">component_c</span><span class="p">,</span> <span class="n">target_system</span><span class="p">):</span>
    <span class="c1"># Repeat similar logic but for model_c structure...</span>
    <span class="c1"># Code duplication, hard to maintain</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This approach creates several problems. Adding a new target format requires
writing new functions for every source format. Changes to source or target
schemas require updating multiple locations. Testing becomes difficult because
conversion logic is scattered across many functions. Operator precedence and
evaluation order can become ambiguous as the number of translation paths grows.</p>
<p>The rule system addresses these challenges through declarative specifications
that separate the ‚Äúwhat‚Äù from the ‚Äúhow.‚Äù A <a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> declares
what transformation should happen. The
<a class="reference internal" href="../references/api.html#r2x_core.apply_rules_to_context" title="r2x_core.apply_rules_to_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_rules_to_context()</span></code></a> executor handles how to perform it.</p>
<p>With the rule system, the same rules work for any source format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rule-based approach - single definition, works for all formats</span>
<span class="n">translation_rule</span> <span class="o">=</span> <span class="n">Rule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;translate_large_components&quot;</span><span class="p">,</span>
    <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;ComponentA&quot;</span><span class="p">,</span>
    <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;ComponentB&quot;</span><span class="p">,</span>
    <span class="nb">filter</span><span class="o">=</span><span class="n">RuleFilter</span><span class="p">(</span>
        <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;all_of&quot;</span><span class="p">,</span>
        <span class="n">predicates</span><span class="o">=</span><span class="p">[</span>
            <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeA&quot;</span><span class="p">]),</span>
            <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;capacity&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;geq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">]),</span>
        <span class="p">]</span>
    <span class="p">),</span>
    <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="s2">&quot;capacity&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">src</span><span class="p">:</span> <span class="s2">&quot;TypeA_Translated&quot;</span><span class="p">,</span>
        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Apply to any source format - same rule works for all</span>
<span class="n">apply_rules_to_context</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="n">translation_rule</span><span class="p">],</span> <span class="n">model_a_components</span><span class="p">)</span>
<span class="n">apply_rules_to_context</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="n">translation_rule</span><span class="p">],</span> <span class="n">model_c_components</span><span class="p">)</span>
<span class="n">apply_rules_to_context</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="p">[</span><span class="n">translation_rule</span><span class="p">],</span> <span class="n">model_x_components</span><span class="p">)</span>
</pre></div>
</div>
<p>The rule system eliminates code duplication, makes translation logic explicit
and testable, and enables configuration-driven translation.</p>
</section>
<section id="core-design-principles">
<h2>Core Design Principles<a class="headerlink" href="#core-design-principles" title="Link to this heading">¬∂</a></h2>
<section id="declarative-over-imperative">
<h3>Declarative Over Imperative<a class="headerlink" href="#declarative-over-imperative" title="Link to this heading">¬∂</a></h3>
<p>Rules describe what transformation should happen rather than how to perform it
step by step. A rule declares that a <code class="docutils literal notranslate"><span class="pre">BusComponent</span></code> should become a
<code class="docutils literal notranslate"><span class="pre">NodeComponent</span></code> with field <code class="docutils literal notranslate"><span class="pre">kv_rating</span></code> mapped to <code class="docutils literal notranslate"><span class="pre">voltage_kv</span></code>. The rule executor
handles the mechanics of reading source fields, applying conversions, and
creating target instances.</p>
<p>This separation allows rules to be expressed in configuration files, versioned
alongside data, and validated statically before execution. The
<a class="reference internal" href="../references/api.html#r2x_core.Rule.from_records" title="r2x_core.Rule.from_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_records()</span></code></a> method enables loading rules from JSON,
making translation logic configurable without code changes.</p>
</section>
<section id="composition-through-filters">
<h3>Composition Through Filters<a class="headerlink" href="#composition-through-filters" title="Link to this heading">¬∂</a></h3>
<p>Rather than embedding conditional logic within rules, the system uses composable
<a class="reference internal" href="../references/api.html#r2x_core.RuleFilter" title="r2x_core.RuleFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleFilter</span></code></a> objects to restrict which components a rule
processes. A filter can match components by field values, by name prefixes, or
by complex boolean combinations using <code class="docutils literal notranslate"><span class="pre">any_of</span></code> and <code class="docutils literal notranslate"><span class="pre">all_of</span></code>.</p>
<p>Filters are separate objects that rules reference, enabling reuse across
multiple rules. A filter matching ‚Äúall generators with capacity above 100 MW in
region ‚ÄòWest‚Äô‚Äù can be defined once and applied to multiple translation rules.
Changes to selection criteria require updating only the filter definition. This
composition avoids the combinatorial explosion that would result from hardcoding
each source/target/filter combination.</p>
</section>
<section id="immutability-for-correctness">
<h3>Immutability for Correctness<a class="headerlink" href="#immutability-for-correctness" title="Link to this heading">¬∂</a></h3>
<p><a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> instances are frozen dataclasses that cannot be
modified after creation. This immutability prevents subtle bugs where shared
rules are accidentally modified, causing unexpected behavior in seemingly
unrelated translations. Each rule application works with the exact configuration
that was defined, making behavior reproducible and debugging straightforward.</p>
<p>The immutability constraint also enables safe sharing of rules across threads
and processes. Concurrent translation operations cannot interfere with each
other through shared mutable state. This is particularly important in enterprise
environments where translation pipelines run continuously on large numbers of
systems.</p>
</section>
</section>
<section id="architecture-overview">
<h2>Architecture Overview<a class="headerlink" href="#architecture-overview" title="Link to this heading">¬∂</a></h2>
<section id="rule-definition">
<h3>Rule Definition<a class="headerlink" href="#rule-definition" title="Link to this heading">¬∂</a></h3>
<p>The <a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> class encapsulates a single transformation
between source and target types. Each rule specifies the source component type
(or types) it matches, the target type (or types) it produces, and a version
number for schema evolution. The <code class="docutils literal notranslate"><span class="pre">field_map</span></code> dictionary describes how source
fields become target fields, supporting both simple one-to-one mappings and
complex multi-field derivations through getter functions.</p>
<p>Here‚Äôs a simple example converting a model_a generator to a model_b generator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">r2x_core</span><span class="w"> </span><span class="kn">import</span> <span class="n">Rule</span>

<span class="n">rule</span> <span class="o">=</span> <span class="n">Rule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;model_a_to_model_b_generator&quot;</span><span class="p">,</span>
    <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;GeneratorA&quot;</span><span class="p">,</span>
    <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;GeneratorB&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;capacity_mw&quot;</span><span class="p">:</span> <span class="s2">&quot;capacity_mw&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fuel_type&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">src</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">fuel_type</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>  <span class="c1"># Transform fuel type</span>
        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fuel_type&quot;</span><span class="p">:</span> <span class="s2">&quot;natural_gas&quot;</span><span class="p">},</span>  <span class="c1"># Fallback if fuel is missing</span>
<span class="p">)</span>
</pre></div>
</div>
<p>A more complex example showing multi-field derivation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule</span> <span class="o">=</span> <span class="n">Rule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;model_a_to_model_b_generator_advanced&quot;</span><span class="p">,</span>
    <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;GeneratorA&quot;</span><span class="p">,</span>
    <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;GeneratorB&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;capacity_mw&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">src</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">max_capacity</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">unit_count</span><span class="p">,</span>
        <span class="s2">&quot;min_up_time_hours&quot;</span><span class="p">:</span> <span class="s2">&quot;min_online_time&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ramp_rate_mw_per_minute&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">src</span><span class="p">:</span> <span class="n">src</span><span class="o">.</span><span class="n">ramp_up_rate</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">depends_on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;generator_location_mapping&quot;</span><span class="p">],</span>  <span class="c1"># Wait for other rules</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Rules support several advanced features. The <code class="docutils literal notranslate"><span class="pre">defaults</span></code> parameter provides
fallback values when source fields are missing, enabling translation from
simpler models that lack detail. The <code class="docutils literal notranslate"><span class="pre">depends_on</span></code> parameter ensures rules
execute in the correct order when target fields come from previously translated
components. The <code class="docutils literal notranslate"><span class="pre">filter</span></code> parameter references a <a class="reference internal" href="../references/api.html#r2x_core.RuleFilter" title="r2x_core.RuleFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleFilter</span></code></a>
that restricts which source components the rule processes.</p>
</section>
<section id="filter-predicates">
<h3>Filter Predicates<a class="headerlink" href="#filter-predicates" title="Link to this heading">¬∂</a></h3>
<p>The <a class="reference internal" href="../references/api.html#r2x_core.RuleFilter" title="r2x_core.RuleFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleFilter</span></code></a> class provides a flexible predicate
language for component selection. Leaf filters compare a component field against
values using operations like equality, membership, numeric comparison, or prefix
matching. Compound filters combine multiple predicates with <code class="docutils literal notranslate"><span class="pre">any_of</span></code> (OR) or
<code class="docutils literal notranslate"><span class="pre">all_of</span></code> (AND) semantics.</p>
<p>Here are some practical filter examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">r2x_core</span><span class="w"> </span><span class="kn">import</span> <span class="n">RuleFilter</span>

<span class="c1"># Simple equality filter</span>
<span class="n">filter_type_a</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">field</span><span class="o">=</span><span class="s2">&quot;component_type&quot;</span><span class="p">,</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeA&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Multiple values (membership)</span>
<span class="n">filter_multiple_types</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">field</span><span class="o">=</span><span class="s2">&quot;component_type&quot;</span><span class="p">,</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeA&quot;</span><span class="p">,</span> <span class="s2">&quot;TypeB&quot;</span><span class="p">,</span> <span class="s2">&quot;TypeC&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Numeric comparison - components above 100 capacity</span>
<span class="n">filter_large</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">field</span><span class="o">=</span><span class="s2">&quot;capacity&quot;</span><span class="p">,</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;geq&quot;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Prefix matching - all components starting with &quot;Region1&quot;</span>
<span class="n">filter_region</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">field</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;startswith&quot;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Region1&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Complex combinations</span>
<span class="n">filter_large_type_a</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;all_of&quot;</span><span class="p">,</span>
    <span class="n">predicates</span><span class="o">=</span><span class="p">[</span>
        <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;component_type&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeA&quot;</span><span class="p">]),</span>
        <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;capacity&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;geq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">50.0</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1"># OR combinations - TypeA OR TypeB</span>
<span class="n">filter_common_types</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;any_of&quot;</span><span class="p">,</span>
    <span class="n">predicates</span><span class="o">=</span><span class="p">[</span>
        <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;component_type&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeA&quot;</span><span class="p">,</span> <span class="s2">&quot;TypeB&quot;</span><span class="p">]),</span>
        <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;component_type&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TypeC&quot;</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The filter implementation optimizes for repeated evaluation. String values are
casefolded once during filter construction rather than on every comparison.
Prefix lists are cached in normalized form. These optimizations matter when
filtering thousands of components during a large system translation.</p>
</section>
<section id="rule-execution">
<h3>Rule Execution<a class="headerlink" href="#rule-execution" title="Link to this heading">¬∂</a></h3>
<p>The <a class="reference internal" href="../references/api.html#r2x_core.apply_rules_to_context" title="r2x_core.apply_rules_to_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_rules_to_context()</span></code></a> function orchestrates the
translation process. It first validates rules for consistency, checking for
duplicate names and unresolved dependencies. Rules are then topologically sorted
so that dependencies execute before dependents. Each rule is applied to all
matching source components, creating target components that are added to the
target system.</p>
<p>Here‚Äôs how to apply rules to translate components:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">r2x_core</span><span class="w"> </span><span class="kn">import</span> <span class="n">apply_rules_to_context</span><span class="p">,</span> <span class="n">Rule</span><span class="p">,</span> <span class="n">PluginContext</span>

<span class="c1"># Define rules for translation</span>
<span class="n">rules</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Rule</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;translate_component_type_a&quot;</span><span class="p">,</span>
        <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;ComponentA&quot;</span><span class="p">,</span>
        <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;ComponentB&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;capacity&quot;</span><span class="p">:</span> <span class="s2">&quot;capacity&quot;</span><span class="p">,</span>
            <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">),</span>
    <span class="n">Rule</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;translate_component_type_b&quot;</span><span class="p">,</span>
        <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;NodeA&quot;</span><span class="p">,</span>
        <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;NodeB&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voltage&quot;</span><span class="p">:</span> <span class="s2">&quot;voltage&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Apply rules within a plugin context</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">apply_rules_to_context</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="n">plugin_context</span><span class="p">,</span>
    <span class="n">rules</span><span class="o">=</span><span class="n">rules</span><span class="p">,</span>
    <span class="n">source_components</span><span class="o">=</span><span class="n">source_system</span><span class="o">.</span><span class="n">get_components</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># Check results</span>
<span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_complete</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Translation successful: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">total_components</span><span class="si">}</span><span class="s2"> components&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Some translations failed:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">rule_result</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">rule_results</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rule_result</span><span class="o">.</span><span class="n">is_err</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">rule_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For single-rule application with fine-grained control:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">r2x_core</span><span class="w"> </span><span class="kn">import</span> <span class="n">apply_single_rule</span>

<span class="c1"># Apply one rule to specific components</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">apply_single_rule</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="n">plugin_context</span><span class="p">,</span>
    <span class="n">rule</span><span class="o">=</span><span class="n">rules</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">source_components</span><span class="o">=</span><span class="n">source_system</span><span class="o">.</span><span class="n">get_components</span><span class="p">()[:</span><span class="mi">10</span><span class="p">],</span>  <span class="c1"># First 10 only</span>
<span class="p">)</span>

<span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">is_ok</span><span class="p">():</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
    <span class="n">target_system</span><span class="o">.</span><span class="n">add_components</span><span class="p">(</span><span class="n">created</span><span class="p">)</span>
</pre></div>
</div>
<p>The function returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">TranslationResult</span></code> containing
detailed statistics. Individual rule outcomes are captured in
<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleResult</span></code> objects, providing visibility into what
succeeded, what failed, and why. This detailed reporting enables debugging of
translation workflows and monitoring of translation quality.</p>
</section>
<section id="single-rule-application">
<h3>Single-Rule Application<a class="headerlink" href="#single-rule-application" title="Link to this heading">¬∂</a></h3>
<p>The <a class="reference internal" href="../references/api.html#r2x_core.apply_single_rule" title="r2x_core.apply_single_rule"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_single_rule()</span></code></a> function handles translation for a
single rule. It resolves source and target types, evaluates filters, builds
target field values, and creates target components. This function is useful when
you need fine-grained control over the translation process or want to apply
rules selectively outside the full workflow.</p>
</section>
</section>
<section id="design-trade-offs">
<h2>Design Trade-offs<a class="headerlink" href="#design-trade-offs" title="Link to this heading">¬∂</a></h2>
<section id="why-frozen-dataclasses">
<h3>Why Frozen Dataclasses?<a class="headerlink" href="#why-frozen-dataclasses" title="Link to this heading">¬∂</a></h3>
<p>Rules could have been regular mutable objects, allowing dynamic modification
during translation. However, mutable rules create subtle bugs. A rule modified
by one translation could affect subsequent translations in unexpected ways.
Debugging becomes difficult because the rule state at failure time differs from
its initial definition. Frozen dataclasses prevent these issues at the cost of
requiring new <a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> objects for any variation. In practice,
rule objects are rarely modified after creation, making this cost acceptable.</p>
</section>
<section id="why-string-based-type-references">
<h3>Why String-Based Type References?<a class="headerlink" href="#why-string-based-type-references" title="Link to this heading">¬∂</a></h3>
<p>Rules reference source and target types by string name rather than actual Python
classes. This design enables rules to be defined in JSON configuration files
where class objects cannot be represented. The executor resolves strings to
classes at runtime using the <code class="xref py py-class docutils literal notranslate"><span class="pre">PluginContext</span></code> model registry.
This late binding adds flexibility but means type errors are caught at execution
rather than definition time. The trade-off favors runtime flexibility for
configuration-driven use cases.</p>
</section>
<section id="why-separate-filters-from-rules">
<h3>Why Separate Filters from Rules?<a class="headerlink" href="#why-separate-filters-from-rules" title="Link to this heading">¬∂</a></h3>
<p>Filter logic could have been embedded directly in rule definitions. However,
separating <a class="reference internal" href="../references/api.html#r2x_core.RuleFilter" title="r2x_core.RuleFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleFilter</span></code></a> objects provides several benefits.
Filters can be reused across multiple rules without duplication. Filter logic
can be tested independently from translation logic. Complex selection criteria
have clear ownership rather than being scattered across rule definitions. This
separation also enables future optimization such as filter merging and predicate
pushdown.</p>
</section>
</section>
<section id="integration-with-plugin-system">
<h2>Integration with Plugin System<a class="headerlink" href="#integration-with-plugin-system" title="Link to this heading">¬∂</a></h2>
<p>Rules integrate with the broader plugin system through the
<code class="xref py py-class docutils literal notranslate"><span class="pre">PluginContext</span></code>. The context provides access to source and
target systems, configuration, and the model registry for type resolution.
Translation plugins define rules as part of their configuration and invoke the
rule executor during the <code class="docutils literal notranslate"><span class="pre">on_translate</span></code> lifecycle hook.</p>
<p>This integration enables declarative plugin configuration. A translation plugin
can be fully configured through JSON files specifying rules, filters, and field
mappings. The plugin code becomes a thin wrapper that loads configuration and
invokes <a class="reference internal" href="../references/api.html#r2x_core.apply_rules_to_context" title="r2x_core.apply_rules_to_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_rules_to_context()</span></code></a>, with all translation logic
expressed declaratively.</p>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading">¬∂</a></h2>
<p>The rule system is designed for large-scale translations involving thousands of
components. Rule validation and dependency sorting happen once per translation,
not per component. Filter predicates cache normalized values to avoid repeated
computation. The executor minimizes object allocation by reusing context objects
across rule applications.</p>
<p>For very large systems, the executor could be extended to parallelize
independent rules. The current sequential execution is sufficient for typical
use cases but the architecture does not preclude parallel execution. The
immutability of rules is actually beneficial for parallelization, as there is no
need for locking or synchronization.</p>
</section>
<section id="extension-points">
<h2>Extension Points<a class="headerlink" href="#extension-points" title="Link to this heading">¬∂</a></h2>
<p>The rule system provides several extension points for future enhancement. Custom
filter operations could be registered to extend the predicate language. Rule
inheritance could allow base rules with shared mappings that derived rules
extend. Bidirectional rules could support round-trip translation by defining
both directions in a single specification. Transformation pipelines could
combine rules from multiple plugins. These extensions would build on the
existing architecture without fundamental changes.</p>
</section>
<section id="complete-example-reeds-to-infrasys-translation">
<h2>Complete Example: ReEDS to Infrasys Translation<a class="headerlink" href="#complete-example-reeds-to-infrasys-translation" title="Link to this heading">¬∂</a></h2>
<p>Here‚Äôs a realistic example translating ReEDS model generators and buses to an
Infrasys system:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">r2x_core</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Rule</span><span class="p">,</span> <span class="n">RuleFilter</span><span class="p">,</span> <span class="n">apply_rules_to_context</span><span class="p">,</span> <span class="n">PluginContext</span>
<span class="p">)</span>

<span class="c1"># Define filters for selective translation</span>
<span class="n">filter_wind</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Wind&quot;</span><span class="p">])</span>
<span class="n">filter_large</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;p_max_mw&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;geq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">100.0</span><span class="p">])</span>
<span class="n">filter_large_wind</span> <span class="o">=</span> <span class="n">RuleFilter</span><span class="p">(</span>
    <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;all_of&quot;</span><span class="p">,</span>
    <span class="n">predicates</span><span class="o">=</span><span class="p">[</span><span class="n">filter_wind</span><span class="p">,</span> <span class="n">filter_large</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Define translation rules</span>
<span class="n">rules</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Step 1: Translate all buses</span>
    <span class="n">Rule</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reeds_buses_to_infrasys&quot;</span><span class="p">,</span>
        <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;ReEDSBus&quot;</span><span class="p">,</span>
        <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;Bus&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;voltage_kv&quot;</span><span class="p">:</span> <span class="s2">&quot;voltage_kv&quot;</span><span class="p">,</span>
            <span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;region&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">),</span>

    <span class="c1"># Step 2: Translate large wind generators (depends on buses)</span>
    <span class="n">Rule</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reeds_wind_generators&quot;</span><span class="p">,</span>
        <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;ReEDSGenerator&quot;</span><span class="p">,</span>
        <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;Generator&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="n">filter_large_wind</span><span class="p">,</span>  <span class="c1"># Only generators &gt;100MW with wind fuel</span>
        <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;p_max_mw&quot;</span><span class="p">:</span> <span class="s2">&quot;p_max_mw&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuel&quot;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">src</span><span class="p">:</span> <span class="s2">&quot;WindOnshore&quot;</span><span class="p">,</span>
            <span class="s2">&quot;zone_id&quot;</span><span class="p">:</span> <span class="s2">&quot;zone&quot;</span><span class="p">,</span>
            <span class="s2">&quot;min_up_time&quot;</span><span class="p">:</span> <span class="s2">&quot;min_online_time_minutes&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">depends_on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;reeds_buses_to_infrasys&quot;</span><span class="p">],</span>
    <span class="p">),</span>

    <span class="c1"># Step 3: Translate conventional generators</span>
    <span class="n">Rule</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;reeds_thermal_generators&quot;</span><span class="p">,</span>
        <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;ReEDSGenerator&quot;</span><span class="p">,</span>
        <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;ThermalGenerator&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="n">RuleFilter</span><span class="p">(</span>
            <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;any_of&quot;</span><span class="p">,</span>
            <span class="n">predicates</span><span class="o">=</span><span class="p">[</span>
                <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Coal&quot;</span><span class="p">]),</span>
                <span class="n">RuleFilter</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Gas&quot;</span><span class="p">]),</span>
            <span class="p">]</span>
        <span class="p">),</span>
        <span class="n">field_map</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;p_max_mw&quot;</span><span class="p">:</span> <span class="s2">&quot;p_max_mw&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuel&quot;</span><span class="p">:</span> <span class="s2">&quot;fuel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;heat_rate_mmbtu_per_mwh&quot;</span><span class="p">:</span> <span class="s2">&quot;heat_rate&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">defaults</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;heat_rate&quot;</span><span class="p">:</span> <span class="mf">10.5</span><span class="p">},</span>  <span class="c1"># Default if missing</span>
        <span class="n">depends_on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;reeds_buses_to_infrasys&quot;</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Apply rules in order</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">PluginContext</span><span class="p">(</span>
    <span class="n">source_system</span><span class="o">=</span><span class="n">reeds_system</span><span class="p">,</span>
    <span class="n">target_system</span><span class="o">=</span><span class="n">infrasys_system</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">apply_rules_to_context</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
    <span class="n">rules</span><span class="o">=</span><span class="n">rules</span><span class="p">,</span>
    <span class="n">source_components</span><span class="o">=</span><span class="n">reeds_system</span><span class="o">.</span><span class="n">components</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Examine results</span>
<span class="k">for</span> <span class="n">rule_result</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">rule_results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">rule_name</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Components processed: </span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">components_processed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Successfully translated: </span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">components_translated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rule_result</span><span class="o">.</span><span class="n">is_err</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Error: </span><span class="si">{</span><span class="n">rule_result</span><span class="o">.</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This example demonstrates several key concepts: selective translation through
filters, field transformation using lambda functions, default values for missing
data, and ordered execution through dependencies. The same rule definitions could
be stored in JSON and loaded from configuration files, enabling fully declarative
translation pipelines.</p>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading">¬∂</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../how-tos/define-rule-mappings.html"><span class="doc">Working with Rules</span></a> for practical usage examples</p></li>
<li><p><a class="reference internal" href="plugin-system.html"><span class="doc">Plugin System Architecture</span></a> for understanding plugin integration</p></li>
<li><p><a class="reference internal" href="../references/api.html#r2x_core.Rule" title="r2x_core.Rule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rule</span></code></a> API reference</p></li>
<li><p><a class="reference internal" href="../references/api.html#r2x_core.RuleFilter" title="r2x_core.RuleFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuleFilter</span></code></a> API reference</p></li>
<li><p><a class="reference internal" href="../references/api.html#r2x_core.apply_rules_to_context" title="r2x_core.apply_rules_to_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply_rules_to_context()</span></code></a> API reference</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">TranslationResult</span></code> API reference</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="data-management.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Data Management: Design Philosophy</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="h5-readers.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">HDF5 Reader System</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Alliance for Sustainable Energy LLC, All rights reserved.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/NREL/r2x-core" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Rule System Architecture</a><ul>
<li><a class="reference internal" href="#purpose-and-motivation">Purpose and Motivation</a></li>
<li><a class="reference internal" href="#core-design-principles">Core Design Principles</a><ul>
<li><a class="reference internal" href="#declarative-over-imperative">Declarative Over Imperative</a></li>
<li><a class="reference internal" href="#composition-through-filters">Composition Through Filters</a></li>
<li><a class="reference internal" href="#immutability-for-correctness">Immutability for Correctness</a></li>
</ul>
</li>
<li><a class="reference internal" href="#architecture-overview">Architecture Overview</a><ul>
<li><a class="reference internal" href="#rule-definition">Rule Definition</a></li>
<li><a class="reference internal" href="#filter-predicates">Filter Predicates</a></li>
<li><a class="reference internal" href="#rule-execution">Rule Execution</a></li>
<li><a class="reference internal" href="#single-rule-application">Single-Rule Application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-trade-offs">Design Trade-offs</a><ul>
<li><a class="reference internal" href="#why-frozen-dataclasses">Why Frozen Dataclasses?</a></li>
<li><a class="reference internal" href="#why-string-based-type-references">Why String-Based Type References?</a></li>
<li><a class="reference internal" href="#why-separate-filters-from-rules">Why Separate Filters from Rules?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integration-with-plugin-system">Integration with Plugin System</a></li>
<li><a class="reference internal" href="#performance-considerations">Performance Considerations</a></li>
<li><a class="reference internal" href="#extension-points">Extension Points</a></li>
<li><a class="reference internal" href="#complete-example-reeds-to-infrasys-translation">Complete Example: ReEDS to Infrasys Translation</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=9dc614e0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=3a0c56fd"></script>
    <script src="../_static/custom.js?v=40245e7d"></script>
    </body>
</html>