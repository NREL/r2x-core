<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Reference" href="../references/index.html"><link rel="prev" title="Unit System Design and Architecture" href="unit-system.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>HDF5 Reader System - r2x-core</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-reports.089ed2e62f89368aa21ac7591d90c12a.css?v=83177741" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">r2x-core</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">r2x-core</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/getting-started.html">Getting Started with R2X Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/working-with-units.html">Working with Units in Power System Components</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../how-tos/index.html">How-To Guides</a><input aria-label="Toggle navigation of How-To Guides" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configuration.html">… create JSON configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configuration.html#load-datastore-from-configuration">… load DataStore from configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configuration.html#export-existing-configurations">… export existing configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configuration.html#validate-configurations">… validate configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/configuration.html#manage-environment-specific-configurations">… manage environment-specific configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data-reading.html">… read data files with DataReader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data-reading.html#configure-data-caching">… configure data caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data-reading.html#handle-different-file-types">… handle different file types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/data-reading.html#work-with-optional-files">… work with optional files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html">Working with HDF5 Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#read-an-hdf5-file-with-default-settings">… read an HDF5 file with default settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#read-tabular-hdf5-data-with-column-names">… read tabular HDF5 data with column names</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#read-hdf5-time-series-data">… read HDF5 time series data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#read-hdf5-files-with-metadata-fields">… read HDF5 files with metadata fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#configure-hdf5-reading-in-json">… configure HDF5 reading in JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#create-a-datastore-with-multiple-hdf5-files">… create a DataStore with multiple HDF5 files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/h5_readers.html#process-hdf5-data-with-datetime-filtering">… process HDF5 data with datetime filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html">… create a basic DataFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html#map-column-names-during-loading">… map column names during loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html#filter-data-during-loading">… filter data during loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html#work-with-different-file-types">… work with different file types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html#use-glob-patterns-to-match-files">… use glob patterns to match files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datafile-basics.html#use-custom-reader-functions">… use custom reader functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datastore-management.html">… create a DataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datastore-management.html#add-files-to-a-datastore">… add files to a DataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datastore-management.html#read-data-from-a-datastore">… read data from a DataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datastore-management.html#manage-datastore-contents">… manage DataStore contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/datastore-management.html#save-and-load-datastore-configurations">… save and load DataStore configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html">… perform column operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#filter-data-during-loading">… filter data during loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#reshape-data-with-pivot-operations">… reshape data with pivot operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#select-specific-columns">… select specific columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/unit-operations.html">Unit Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html">… perform column operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#filter-data-during-loading">… filter data during loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#reshape-data-with-pivot-operations">… reshape data with pivot operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/file-operations.html#select-specific-columns">… select specific columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html">… get all components as records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#filter-components-by-type">… filter components by type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#filter-components-by-attributes">… filter components by attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#select-specific-fields">… select specific fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#rename-fields-with-key-mapping">… rename fields with key mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#combine-filtering-field-selection-and-renaming">… combine filtering, field selection, and renaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#use-records-for-data-analysis">… use records for data analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#export-components-to-csv">… export components to CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/system-operations.html#count-components-by-type">… count components by type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html">… mark a file as time series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#configure-time-series-files-in-datastore">… configure time series files in DataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#validate-time-series-file-formats">… validate time series file formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#store-multi-year-time-series-in-a-single-file">… store multi-year time series in a single file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#filter-time-series-files-in-a-parser">… filter time series files in a parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#handle-different-time-series-file-types">… handle different time series file types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#export-time-series-files">… export time series files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/timeseries-files.html#add-support-for-a-new-time-series-format">… add support for a new time series format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html">… create a basic exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#export-components-to-csv-files">… export components to CSV files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#export-time-series-data">… export time series data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#handle-multi-year-time-series-export">… handle multi-year time series export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#validate-export-configuration">… validate export configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#use-custom-export-transformations">… use custom export transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#export-with-progress-logging">… export with progress logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/exporter-basics.html#handle-optional-time-series-files">… handle optional time series files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html">… follow plugin standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#use-standard-directory-structure">… use standard directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#create-configuration-classes">… create configuration classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#customize-file-and-directory-names">… customize file and directory names</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#load-default-constants">… load default constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#create-file-mappings">… create file mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#get-file-mapping-path">… get file mapping path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#use-custom-mapping-filename">… use custom mapping filename</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#create-datastore-from-config">… create DataStore from config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#get-mapping-path-from-pluginmanager">… get mapping path from PluginManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#generate-cli-schemas">… generate CLI schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#build-cli-tools-from-schema">… build CLI tools from schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#understand-cli-flag-naming">… understand CLI flag naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#see-complete-plugin-example">… see complete plugin example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#follow-best-practices">… follow best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-standards.html#see-also">… see also</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html">… register a complete model plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-a-parser-only-plugin">… register a parser-only plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-an-exporter-only-plugin">… register an exporter-only plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-a-system-modifier">… register a system modifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-a-system-modifier-with-context">… register a system modifier with context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-filter-functions">… register filter functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#register-a-polymorphic-filter">… register a polymorphic filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#create-an-external-plugin-package">… create an external plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-registration.html#test-plugin-registration">… test plugin registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html">… discover registered plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#load-and-use-a-parser">… load and use a parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#load-and-use-an-exporter">… load and use an exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#apply-a-system-modifier">… apply a system modifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#apply-multiple-modifiers-in-sequence">… apply multiple modifiers in sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#apply-modifiers-with-context">… apply modifiers with context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#apply-a-filter-to-data">… apply a filter to data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#chain-multiple-filters">… chain multiple filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#use-filters-in-parser">… use filters in parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#discover-plugins-from-entry-points">… discover plugins from entry points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#build-a-translation-application">… build a translation application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#handle-missing-plugins-gracefully">… handle missing plugins gracefully</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/plugin-usage.html#validate-translation-path">… validate translation path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html">… manage versions in data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#compare-versions">… compare versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#set-version-in-data">… set version in data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#use-git-based-versioning">… use git-based versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#use-timestamp-versioning">… use timestamp versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#track-file-modification-times">… track file modification times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#use-custom-version-fields">… use custom version fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#implement-custom-versioning-strategy">… implement custom versioning strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#check-version-compatibility">… check version compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/version-management.html#validate-version-format">… validate version format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html">… create a basic upgrader class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#register-file-upgrade-steps">… register FILE upgrade steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#use-upgrader-with-datastore">… use upgrader with DataStore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#rename-files-during-upgrade">… rename files during upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#restructure-configuration-files">… restructure configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#order-multiple-upgrade-steps-with-priority">… order multiple upgrade steps with priority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#move-files-to-new-locations">… move files to new locations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#transform-csv-data-during-upgrade">… transform CSV data during upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#update-json-schema-during-upgrade">… update JSON schema during upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#detect-version-from-multiple-sources">… detect version from multiple sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#use-git-based-versioning">… use Git-based versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#handle-missing-version-gracefully">… handle missing version gracefully</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-data.html#validate-upgraded-data">… validate upgraded data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html">… create a SYSTEM upgrader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#register-system-upgrade-steps">… register SYSTEM upgrade steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#use-system-upgrader">… use SYSTEM upgrader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#modify-component-properties">… modify component properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#combine-file-and-system-upgrades">… combine FILE and SYSTEM upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#update-system-metadata">… update system metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#add-new-components-during-upgrade">… add new components during upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#remove-deprecated-components">… remove deprecated components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#update-time-series-data">… update time series data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#migrate-component-relationships">… migrate component relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#order-system-upgrades-with-priority">… order SYSTEM upgrades with priority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how-tos/upgrade-systems.html#validate-system-after-upgrade">… validate system after upgrade</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Explanations</a><input aria-label="Toggle navigation of Explanations" checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plugin-system.html">Plugin System Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit-system.html">Unit System Design and Architecture</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">HDF5 Reader System</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../references/index.html">Reference</a><input aria-label="Toggle navigation of Reference" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../references/api.html">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/units.html">Units Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/parser.html">Parser Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/exporter.html">Exporter Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/plugins.html">Plugin System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/versioning.html">Versioning Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/upgrader.html">Upgrade System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/processors.html">Data Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/file-formats.html">File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/file-types.html">File Types API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/models.html">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/NREL/r2x-core/blob/main/docs/explanations/h5-readers.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/NREL/r2x-core/edit/main/docs/explanations/h5-readers.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="hdf5-reader-system">
<h1>HDF5 Reader System<a class="headerlink" href="#hdf5-reader-system" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The HDF5 reader in r2x-core uses a configuration-driven approach to read files with any structure. Instead of hardcoding logic for specific file formats, users describe their file’s structure through configuration parameters.</p>
</section>
<section id="design-philosophy">
<h2>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Link to this heading">¶</a></h2>
<p>HDF5 files have no standard structure. Different models, tools, and users organize data differently. Dataset names vary between <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">measurements</span></code>, and countless other possibilities. Column names might be in separate datasets or embedded within the data. Datetime fields have different formats and timezone handling requirements. Metadata can be stored anywhere in the file hierarchy.</p>
<p>The reader addresses this variability through configuration. Users describe what their file contains and where to find it. A file with data in a dataset called <code class="docutils literal notranslate"><span class="pre">measurements</span></code> and column names in <code class="docutils literal notranslate"><span class="pre">sensor_names</span></code> needs only this configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;measurements&quot;</span><span class="p">,</span>
    <span class="s2">&quot;columns_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sensor_names&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This approach keeps the library model-agnostic. The framework doesn’t need to know about ReEDS, PLEXOS, or any specific model format. Users adapt the reader to their files through configuration rather than waiting for library updates or writing custom code.</p>
</section>
<section id="how-the-reader-works">
<h2>How the Reader Works<a class="headerlink" href="#how-the-reader-works" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">configurable_h5_reader()</span></code> function adapts its behavior based on the configuration provided.</p>
<section id="default-behavior">
<h3>Default Behavior<a class="headerlink" href="#default-behavior" title="Link to this heading">¶</a></h3>
<p>When no configuration is provided, the reader finds the first dataset in the file and reads it. For 1D arrays, this creates a single column. For 2D arrays, it creates numbered columns like <code class="docutils literal notranslate"><span class="pre">col_0</span></code>, <code class="docutils literal notranslate"><span class="pre">col_1</span></code>, and so on.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># No reader_kwargs provided</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="n">DataFile</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">fpath</span><span class="o">=</span><span class="s2">&quot;file.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="specifying-the-data-location">
<h3>Specifying the Data Location<a class="headerlink" href="#specifying-the-data-location" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">data_key</span></code> parameter tells the reader which dataset contains the main data. This is useful when files contain multiple datasets and you want a specific one rather than just the first.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;measurements&quot;</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="adding-column-names">
<h3>Adding Column Names<a class="headerlink" href="#adding-column-names" title="Link to this heading">¶</a></h3>
<p>For 2D data arrays, the <code class="docutils literal notranslate"><span class="pre">columns_key</span></code> parameter points to a dataset containing column names. The reader splits the 2D array into named columns using these names. Byte strings are automatically decoded to UTF-8 for convenience.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;values&quot;</span><span class="p">,</span>
    <span class="s2">&quot;columns_key&quot;</span><span class="p">:</span> <span class="s2">&quot;sensor_names&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="parsing-datetime-fields">
<h3>Parsing Datetime Fields<a class="headerlink" href="#parsing-datetime-fields" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">datetime_key</span></code> parameter identifies a dataset containing datetime strings. The reader parses these strings, stripping timezone information by default, and converts them to numpy <code class="docutils literal notranslate"><span class="pre">datetime64[us]</span></code> format for compatibility with Polars. The resulting column is named <code class="docutils literal notranslate"><span class="pre">datetime</span></code> by default, though this can be customized with <code class="docutils literal notranslate"><span class="pre">datetime_column_name</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datetime_key&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamps&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Timezone stripping handles the common case where energy models use a single reference timezone. Most datetime parsing in numpy and Polars is simpler without timezone information. Users who need to preserve the original timezone strings can set <code class="docutils literal notranslate"><span class="pre">strip_timezone=False</span></code>.</p>
</section>
<section id="including-additional-metadata">
<h3>Including Additional Metadata<a class="headerlink" href="#including-additional-metadata" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">additional_keys</span></code> parameter specifies other datasets to include as columns. The reader automatically formats these names for cleaner output, converting names like <code class="docutils literal notranslate"><span class="pre">index_year</span></code> to <code class="docutils literal notranslate"><span class="pre">solve_year</span></code>. If a specified key doesn’t exist in the file, it’s simply skipped.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;columns_key&quot;</span><span class="p">:</span> <span class="s2">&quot;columns&quot;</span><span class="p">,</span>
    <span class="s2">&quot;additional_keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;scenario&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="configuration-parameters">
<h2>Configuration Parameters<a class="headerlink" href="#configuration-parameters" title="Link to this heading">¶</a></h2>
<section id="data-configuration">
<h3>Data Configuration<a class="headerlink" href="#data-configuration" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">data_key</span></code> parameter (string, defaults to first dataset) specifies which dataset contains the main data array, whether 1D or 2D.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">columns_key</span></code> parameter (string, optional) points to a dataset containing column names for 2D data arrays.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">index_key</span></code> parameter (string, optional) identifies a dataset to include as an index column, separate from datetime indices.</p>
</section>
<section id="datetime-configuration">
<h3>Datetime Configuration<a class="headerlink" href="#datetime-configuration" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">datetime_key</span></code> parameter (string, optional) specifies a dataset containing datetime strings to parse.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">datetime_column_name</span></code> parameter (string, defaults to “datetime”) sets the name for the resulting datetime column.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">strip_timezone</span></code> parameter (boolean, defaults to true) controls whether timezone information is removed before parsing datetime strings.</p>
</section>
<section id="additional-data">
<h3>Additional Data<a class="headerlink" href="#additional-data" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">additional_keys</span></code> parameter (list of strings, defaults to empty) lists other datasets to include as columns.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">decode_bytes</span></code> parameter (boolean, defaults to true) controls whether byte strings are decoded to UTF-8.</p>
</section>
</section>
<section id="automatic-behaviors">
<h2>Automatic Behaviors<a class="headerlink" href="#automatic-behaviors" title="Link to this heading">¶</a></h2>
<p>The reader automatically detects array dimensions. A 1D array creates a single column. A 2D array without column names creates numbered columns like <code class="docutils literal notranslate"><span class="pre">data_col_0</span></code> and <code class="docutils literal notranslate"><span class="pre">data_col_1</span></code>. A 2D array with column names creates named columns.</p>
<p>Column name formatting happens automatically. Dataset keys like <code class="docutils literal notranslate"><span class="pre">index_year</span></code> become <code class="docutils literal notranslate"><span class="pre">solve_year</span></code>, following energy model conventions. The prefix <code class="docutils literal notranslate"><span class="pre">index_</span></code> is stripped from keys like <code class="docutils literal notranslate"><span class="pre">index_region</span></code> to produce cleaner column names.</p>
<p>Byte string decoding converts HDF5 byte strings to Python Unicode strings automatically. HDF5 often stores strings as bytes, but Python 3 strings are Unicode by default, making automatic conversion convenient for data analysis.</p>
</section>
<section id="architecture-decisions">
<h2>Architecture Decisions<a class="headerlink" href="#architecture-decisions" title="Link to this heading">¶</a></h2>
<section id="configuration-over-custom-functions">
<h3>Configuration Over Custom Functions<a class="headerlink" href="#configuration-over-custom-functions" title="Link to this heading">¶</a></h3>
<p>The library could allow users to provide custom reader functions that contain arbitrary logic for reading files. While flexible, this approach doesn’t work with JSON configuration files. Users would need to write Python code, making it harder to version control configurations separately from code. Testing would require understanding each custom function’s logic. Configuration, by contrast, works seamlessly with JSON, requires no code, and is self-documenting.</p>
</section>
<section id="single-generic-reader-over-multiple-reader-classes">
<h3>Single Generic Reader Over Multiple Reader Classes<a class="headerlink" href="#single-generic-reader-over-multiple-reader-classes" title="Link to this heading">¶</a></h3>
<p>The library could provide different reader classes for different model formats, like <code class="docutils literal notranslate"><span class="pre">ReedsH5Reader</span></code> or <code class="docutils literal notranslate"><span class="pre">PlexosH5Reader</span></code>. This would create coupling between the library and specific models. The library would need to know about every format and maintain code for each. Users would be locked into predefined formats. A single generic reader configured by users avoids all these issues while providing unlimited flexibility.</p>
</section>
<section id="single-dispatch-for-file-types">
<h3>Single Dispatch for File Types<a class="headerlink" href="#single-dispatch-for-file-types" title="Link to this heading">¶</a></h3>
<p>The file reading system uses Python’s <code class="docutils literal notranslate"><span class="pre">functools.singledispatch</span></code> to route different file formats to appropriate readers. Each file format type (<code class="docutils literal notranslate"><span class="pre">H5Format</span></code>, <code class="docutils literal notranslate"><span class="pre">TableFormat</span></code>, etc.) gets dedicated reading logic. This provides type-based routing at runtime, makes it easy to extend with new formats, and maintains clear separation of concerns between different file types.</p>
</section>
</section>
<section id="trade-offs">
<h2>Trade-offs<a class="headerlink" href="#trade-offs" title="Link to this heading">¶</a></h2>
<p>Configuration requires users to specify file structure explicitly. This verbosity is acceptable because most users read the same files repeatedly, so configuration is written once. The explicitness prevents silent errors from wrong assumptions. Configuration serves as documentation of file structure and can be version controlled alongside data.</p>
<p>The reader doesn’t validate that specified keys exist until files are actually read. Early validation would require opening files during configuration, which is expensive and unnecessary. Delayed validation provides better error messages with context about what failed during reading. Missing keys in lists like <code class="docutils literal notranslate"><span class="pre">additional_keys</span></code> are gracefully handled by skipping them.</p>
<p>Datetime parsing assumes ISO 8601 format with specific timezone handling. This covers the vast majority of HDF5 datetime storage. Edge cases can disable automatic parsing with <code class="docutils literal notranslate"><span class="pre">strip_timezone=False</span></code> and handle conversion manually. Complex datetime parsing belongs in preprocessing steps rather than the core library.</p>
</section>
<section id="future-considerations">
<h2>Future Considerations<a class="headerlink" href="#future-considerations" title="Link to this heading">¶</a></h2>
<p>Chunk reading for very large files could improve memory efficiency by processing data in pieces. Lazy evaluation could defer reading until data is actually needed. Optional schema validation could check file structure against expected configurations. Automatic compression handling could simplify working with compressed datasets.</p>
<p>The library intentionally avoids auto-detecting file structure. Users should know their data. Format conversion between different HDF5 structures belongs in external tools. Model-specific logic defeats the purpose of a generic, configuration-driven approach.</p>
</section>
<section id="examples-of-file-structures">
<h2>Examples of File Structures<a class="headerlink" href="#examples-of-file-structures" title="Link to this heading">¶</a></h2>
<section id="energy-model-time-series">
<h3>Energy Model Time Series<a class="headerlink" href="#energy-model-time-series" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>file.h5
├── data (8760 x 50)        # Hourly data, 50 regions
├── columns (50,)           # Region names
├── index_datetime (8760,)  # Timestamps
└── index_year (8760,)      # Solve year for each hour
</pre></div>
</div>
<p><strong>Configuration</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;columns_key&quot;</span><span class="p">:</span> <span class="s2">&quot;columns&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datetime_key&quot;</span><span class="p">:</span> <span class="s2">&quot;index_datetime&quot;</span><span class="p">,</span>
    <span class="s2">&quot;additional_keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;index_year&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="scientific-measurements">
<h3>Scientific Measurements<a class="headerlink" href="#scientific-measurements" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>measurements.h5
├── temperature (1000,)     # 1D time series
├── pressure (1000,)        # 1D time series
├── timestamps (1000,)      # When measured
├── sensor_id (1000,)       # Which sensor
└── location (1000,)        # Where measured
</pre></div>
</div>
<p><strong>Configuration</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_key&quot;</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span>
    <span class="s2">&quot;datetime_key&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamps&quot;</span><span class="p">,</span>
    <span class="s2">&quot;additional_keys&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pressure&quot;</span><span class="p">,</span> <span class="s2">&quot;sensor_id&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="simple-tabular-data">
<h3>Simple Tabular Data<a class="headerlink" href="#simple-tabular-data" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>simple.h5
└── values (100 x 3)        # Just a 2D array
</pre></div>
</div>
<p><strong>Configuration</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># No configuration needed - uses default</span>
<span class="n">reader_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>The HDF5 reader achieves flexibility through configuration rather than code. The library remains model-agnostic with no hardcoded knowledge of specific formats. Users control everything through configuration parameters. The approach works seamlessly with JSON configuration files and is self-documenting. A single code path handles all formats, making the system maintainable. New formats need only new configuration, never code changes.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../references/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Reference</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="unit-system.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Unit System Design and Architecture</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Alliance for Sustainable Energy LLC, All rights reserved.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/NREL/r2x-core" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">HDF5 Reader System</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
<li><a class="reference internal" href="#how-the-reader-works">How the Reader Works</a><ul>
<li><a class="reference internal" href="#default-behavior">Default Behavior</a></li>
<li><a class="reference internal" href="#specifying-the-data-location">Specifying the Data Location</a></li>
<li><a class="reference internal" href="#adding-column-names">Adding Column Names</a></li>
<li><a class="reference internal" href="#parsing-datetime-fields">Parsing Datetime Fields</a></li>
<li><a class="reference internal" href="#including-additional-metadata">Including Additional Metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-parameters">Configuration Parameters</a><ul>
<li><a class="reference internal" href="#data-configuration">Data Configuration</a></li>
<li><a class="reference internal" href="#datetime-configuration">Datetime Configuration</a></li>
<li><a class="reference internal" href="#additional-data">Additional Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#automatic-behaviors">Automatic Behaviors</a></li>
<li><a class="reference internal" href="#architecture-decisions">Architecture Decisions</a><ul>
<li><a class="reference internal" href="#configuration-over-custom-functions">Configuration Over Custom Functions</a></li>
<li><a class="reference internal" href="#single-generic-reader-over-multiple-reader-classes">Single Generic Reader Over Multiple Reader Classes</a></li>
<li><a class="reference internal" href="#single-dispatch-for-file-types">Single Dispatch for File Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trade-offs">Trade-offs</a></li>
<li><a class="reference internal" href="#future-considerations">Future Considerations</a></li>
<li><a class="reference internal" href="#examples-of-file-structures">Examples of File Structures</a><ul>
<li><a class="reference internal" href="#energy-model-time-series">Energy Model Time Series</a></li>
<li><a class="reference internal" href="#scientific-measurements">Scientific Measurements</a></li>
<li><a class="reference internal" href="#simple-tabular-data">Simple Tabular Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=f539c95a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=3a0c56fd"></script>
    </body>
</html>